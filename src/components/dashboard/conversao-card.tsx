'use client';

import * as React from 'react';
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { ArrowRightLeft, Loader2, Plus } from 'lucide-react';
import { useToast } from '@/hooks/use-toast';
import { useFirebase } from '@/firebase';
import { collection, addDoc } from 'firebase/firestore';
import { useLanguage } from '@/lib/i18n';
import Image from 'next/image';
import { getExchangeRates } from '@/lib/exchange-rates';

type Currency = 'BRL' | 'EUR' | 'USD';
type Bank = 'Wise' | 'C6 Bank' | 'Itaú' | 'Millennium' | 'Novobanco';

const currencyFlags: Record<Currency, string> = {
  BRL: 'https://flagcdn.com/w40/br.png',
  EUR: 'https://flagcdn.com/w40/eu.png',
  USD: 'https://flagcdn.com/w40/us.png',
};

const WISE_FEE_PERCENTAGE = 0.0422; // 4,22%

export function WiseConversionCard() {
  const [fromAmount, setFromAmount] = React.useState<string>('');
  const [fromCurrency, setFromCurrency] = React.useState<Currency>('BRL');
  const [toAmount, setToAmount] = React.useState<string>('');
  const [toCurrency, setToCurrency] = React.useState<Currency>('EUR');
  const [selectedBank, setSelectedBank] = React.useState<Bank>('Wise');
  const [isSubmitting, setIsSubmitting] = React.useState(false);
  const [exchangeRates, setExchangeRates] = React.useState<any>(null);
  const [isLoadingRates, setIsLoadingRates] = React.useState(false);
  const { toast } = useToast();
  const { firestore, user } = useFirebase();
  const { t } = useLanguage();

  // Carregar taxas de câmbio ao montar o componente
  React.useEffect(() => {
    const loadRates = async () => {
      setIsLoadingRates(true);
      try {
        const ratesData = await getExchangeRates();
        setExchangeRates(ratesData.rates);
      } catch (error) {
        console.error('Erro ao carregar taxas de câmbio:', error);
      } finally {
        setIsLoadingRates(false);
      }
    };
    loadRates();
  }, []);

  // Função para alternar moedas
  const handleSwapCurrencies = () => {
    // Inverter moedas e valores
    const tempCurrency = fromCurrency;
    const tempAmount = fromAmount;
    
    setFromCurrency(toCurrency);
    setToCurrency(tempCurrency);
    
    // Se há valor convertido, usar ele como novo valor de origem
    // Senão, manter vazio
    if (toAmount) {
      setFromAmount(toAmount);
    } else {
      setFromAmount('');
    }
    // O toAmount será recalculado automaticamente pelo useEffect
  };

  // Calcular conversão automaticamente quando valores mudam
  React.useEffect(() => {
    if (!fromAmount || !exchangeRates || isLoadingRates) return;

    const amount = parseFloat(fromAmount);
    if (isNaN(amount) || amount <= 0) return;

    // Verificar se as moedas são iguais
    if (fromCurrency === toCurrency) {
      setToAmount('');
      return;
    }

    // Aplicar taxa Wise
    const amountAfterFee = amount * (1 - WISE_FEE_PERCENTAGE);

    // Calcular conversão baseado nas moedas
    let convertedAmount = 0;
    const rateKey = `${fromCurrency}_${toCurrency}`;
    
    if (exchangeRates[rateKey]) {
      convertedAmount = amountAfterFee * exchangeRates[rateKey];
    } else {
      // Converter via BRL como moeda intermediária
      if (fromCurrency === 'BRL') {
        convertedAmount = amountAfterFee * exchangeRates[`BRL_${toCurrency}`];
      } else if (toCurrency === 'BRL') {
        convertedAmount = amountAfterFee * exchangeRates[`${fromCurrency}_BRL`];
      } else {
        // EUR para USD ou USD para EUR (via BRL)
        const toBrl = amountAfterFee * exchangeRates[`${fromCurrency}_BRL`];
        convertedAmount = toBrl * exchangeRates[`BRL_${toCurrency}`];
      }
    }

    setToAmount(convertedAmount.toFixed(2));
  }, [fromAmount, fromCurrency, toCurrency, exchangeRates, isLoadingRates]);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    if (!user?.uid || !firestore) {
      toast({
        variant: 'destructive',
        title: t('toast.error'),
        description: t('toast.notAuthenticated'),
      });
      return;
    }

    if (fromCurrency === toCurrency) {
      toast({
        variant: 'destructive',
        title: t('toast.error'),
        description: 'Não é possível converter para a mesma moeda',
      });
      return;
    }

    if (!fromAmount || !toAmount) {
      toast({
        variant: 'destructive',
        title: t('toast.error'),
        description: 'Preencha todos os campos',
      });
      return;
    }

    setIsSubmitting(true);
    try {
      const originalAmount = parseFloat(fromAmount);
      const wiseFee = originalAmount * WISE_FEE_PERCENTAGE;
      const amountAfterFee = originalAmount - wiseFee;
      
      const wiseTransactionsRef = collection(firestore, 'users', user.uid, 'wiseTransactions');
      await addDoc(wiseTransactionsRef, {
        fromAmount: originalAmount,
        fromCurrency,
        toAmount: parseFloat(toAmount),
        toCurrency,
        bank: selectedBank,
        wiseFee: wiseFee,
        amountAfterFee: amountAfterFee,
        exchangeRate: parseFloat(toAmount) / amountAfterFee,
        createdAt: new Date().toISOString(),
      });

      toast({
        title: t('toast.success'),
        description: 'Conversão Wise registrada com sucesso!',
      });

      // Limpar formulário
      setFromAmount('');
      setToAmount('');
    } catch (error) {
      console.error('Erro ao salvar conversão Wise:', error);
      toast({
        variant: 'destructive',
        title: t('toast.error'),
        description: 'Erro ao registrar conversão',
      });
    } finally {
      setIsSubmitting(false);
    }
  };

  const getCurrencySymbol = (currency: Currency) => {
    switch (currency) {
      case 'BRL': return 'R$';
      case 'EUR': return '€';
      case 'USD': return '$';
    }
  };

  return (
    <Card>
      <CardHeader>
        <div className="flex items-start justify-between">
          <div>
            <CardTitle>Conversão</CardTitle>
            <CardDescription>
              Registre suas conversões de moeda realizadas no {selectedBank}
            </CardDescription>
          </div>
          {selectedBank === 'Wise' && (
            <svg className="h-11 w-11 flex-shrink-0" viewBox="0 0 106 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill="currentColor" d="M58.7377.358803h6.4982L61.9668 23.681h-6.4983L58.7377.358803Zm-8.1922 0L46.1602 13.794 44.2465.358803h-4.5448L33.9608 13.7541 33.2433.358803h-6.2991L29.1369 23.681h5.2226L40.818 8.93022 43.0904 23.681h5.1428L56.7249.358803h-6.1794ZM105.103 13.9136H89.6744c.0798 3.0299 1.8937 5.0233 4.5648 5.0233 2.0133 0 3.608-1.0765 4.8439-3.1296l5.2079 2.3674C102.501 21.7017 98.729 24 94.0798 24 87.741 24 83.535 19.7342 83.535 12.8771 83.535 5.34221 88.4784 0 95.4552 0c6.1398 0 10.0068 4.14618 10.0068 10.6046 0 1.0765-.12 2.1528-.359 3.309Zm-5.7807-4.46512c0-2.71095-1.515-4.42525-3.9468-4.42525-2.5117 0-4.5848 1.79402-5.143 4.42525h9.0898ZM6.63326 7.38685 0 15.1389h11.844l1.3309-3.6553H8.09965l3.10105-3.58555.01-.09511L9.19424 4.3319h9.07196l-7.0323 19.3492h4.8124L24.538.358823H2.60021L6.63326 7.38685Zm69.16744-2.3636c2.2923 0 4.301 1.23273 6.0551 3.34565l.9216-6.57488C81.1429.687707 78.9303 0 76 0c-5.8205 0-9.0896 3.40865-9.0896 7.73421 0 2.99999 1.6744 4.83389 4.4252 6.01989l1.3156.598c2.4518 1.0466 3.1097 1.5649 3.1097 2.6712 0 1.1461-1.1064 1.8737-2.7907 1.8737-2.7808.01-5.0332-1.4153-6.7276-3.8472l-.939 6.699C67.2332 23.2201 69.7067 24 72.9702 24c5.5315 0 8.9302-3.1894 8.9302-7.6147 0-3.0099-1.3355-4.9434-4.7044-6.4584l-1.4351-.67772c-1.9934-.88708-2.6711-1.37543-2.6711-2.35216 0-1.05647.9269-1.87377 2.7109-1.87377Z"></path>
            </svg>
          )}
          {selectedBank === 'C6 Bank' && (
            <svg className="h-11 w-11 flex-shrink-0" viewBox="0 0 120 24" fill="black" xmlns="http://www.w3.org/2000/svg">
              <path clipRule="evenodd" shapeRendering="geometricPrecision" d="M15.034 16.045c.778-.681 1.285-1.576 1.524-2.684h7.68c-.352 3.167-1.627 5.731-3.824 7.694C18.216 23.018 15.51 24 12.298 24c-2.343 0-4.452-.515-6.328-1.544-1.876-1.029-3.34-2.459-4.392-4.29C.526 16.335 0 14.28 0 12c0-2.28.526-4.335 1.578-6.166C2.63 4.003 4.094 2.573 5.97 1.544 7.846.514 9.955 0 12.298 0c3.161 0 5.83.947 8.007 2.842 2.176 1.894 3.462 4.377 3.855 7.448H16.59c-.321-1.013-.87-1.828-1.648-2.446-.777-.617-1.648-.926-2.612-.926-1.327 0-2.397.467-3.21 1.401-.815.934-1.221 2.161-1.221 3.68 0 1.51.41 2.732 1.228 3.666.82.934 1.886 1.4 3.203 1.4 1.026 0 1.928-.34 2.705-1.02zm27.26-6.24c1.491 1.43 2.237 3.28 2.237 5.547 0 2.592-.858 4.682-2.575 6.268-1.718 1.587-3.98 2.38-6.79 2.38-2.776 0-5.033-.796-6.772-2.388-1.74-1.593-2.609-3.656-2.609-6.193 0-1.385.239-2.779.716-4.181.477-1.402 1.215-2.936 2.214-4.6l3.53-5.87 7.46-.001-4.177 6.926c.417-.022.746-.033.988-.033 2.359 0 4.284.715 5.777 2.145zm-5.037 7.675c.537-.547.806-1.256.806-2.128 0-.871-.269-1.586-.806-2.145-.538-.559-1.235-.838-2.09-.838-.856 0-1.554.28-2.09.838-.539.559-.807 1.274-.807 2.145 0 .872.268 1.581.806 2.128.537.548 1.235.822 2.09.822.856 0 1.553-.274 2.09-.822zm21.259-6.52c2.65.784 4.324 3.129 4.324 6.16 0 1.675-.578 3.13-1.718 4.325-1.133 1.186-2.554 1.788-4.224 1.788h-7.226a.101.101 0 0 1-.1-.102V.869c0-.056.044-.102.1-.102h6.365c1.547 0 2.824.517 3.793 1.538.996.98 1.504 2.29 1.504 3.887 0 2.142-1.063 3.908-2.818 4.768zm2 9.912c1.016-1.035 1.51-2.262 1.51-3.753 0-1.656-.507-3.013-1.507-4.031-1.035-1.053-2.31-1.566-3.898-1.566h-6.234v10.881h6.51c1.432 0 2.65-.515 3.619-1.53zM50.386 1.597v9.096h5.651c1.322 0 2.405-.422 3.221-1.253.837-.852 1.261-1.945 1.261-3.248 0-2.706-1.843-4.595-4.482-4.595h-5.65zm69.595 21.475a.101.101 0 0 1-.081.16h-.758a.1.1 0 0 1-.083-.043l-8.099-11.565-3.577 4.206v7.3a.101.101 0 0 1-.1.103h-.602a.101.101 0 0 1-.1-.102V.869c0-.056.045-.102.1-.102h.602c.055 0 .1.046.1.102v13.724L119 .803a.101.101 0 0 1 .077-.036h.796c.056 0 .101.046.101.102 0 .025-.01.048-.024.066l-8.451 10.032 8.482 12.105zM101.496.767c.055 0 .1.046.1.102v22.262a.101.101 0 0 1-.1.102h-.277a.098.098 0 0 1-.081-.042l-14.58-20.6v20.54a.101.101 0 0 1-.1.102h-.614a.101.101 0 0 1-.1-.102V.869c0-.056.045-.102.1-.102h.39a.1.1 0 0 1 .08.042l14.467 20.44V.87c0-.056.045-.102.1-.102h.615zM82.118 23.095a.101.101 0 0 1-.094.138h-.638a.1.1 0 0 1-.094-.068l-2.552-6.883H68.337l-2.551 6.885a.1.1 0 0 1-.094.066h-.639a.101.101 0 0 1-.093-.139L73.25.833a.1.1 0 0 1 .094-.066h.388a.1.1 0 0 1 .095.067l8.29 22.261zm-13.482-7.643h9.806L73.54 2.369l-4.903 13.083z"></path>
            </svg>
          )}
          {selectedBank === 'Itaú' && (
            <svg className="h-11 w-11 flex-shrink-0" viewBox="0 0 500 500" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M218.676 10.574c-13.797.328-23.918.813-42.473 1.957-8.582.512-17.95 1.266-24.547 1.926-1.656.18-5.12.512-7.68.754-10.753 1.055-26.718 3.07-33.433 4.215-1.418.242-3.496.574-4.668.754-1.145.152-3.195.511-4.52.754-1.324.242-3.554.664-4.968.902-4.973.844-13.434 2.562-18.223 3.707-1.328.332-3.707.902-5.273 1.266-1.567.359-2.98.691-3.16.722-8.829 2.106-17.594 6.356-24.34 11.867C38.824 44.73 32.953 53.344 30 61.898c-.48 1.325-.965 2.68-1.113 3.012-.512 1.145-2.742 10.781-4.34 18.676-.238 1.324-.66 3.281-.902 4.367-.243 1.082-.57 2.98-.782 4.215-.183 1.234-.422 2.742-.574 3.312-.453 1.72-2.289 13.465-3.465 21.989-1.144 8.254-1.898 14.25-2.558 20.332-.332 2.98-.664 5.902-.723 6.476-.09.57-.363 3.493-.633 6.477-.242 2.98-.601 6.625-.785 8.133-.633 5.539-2.2 29.668-2.98 46.687-.602 12.617-.993 39.637-.782 54.367.211 18.372.66 34.79 1.082 40.512.153 2.317.453 7.2.633 10.844.18 3.644.422 8.312.574 10.39.692 10.422 1.235 17.258 1.504 19.426.153 1.328.512 4.852.754 7.801.242 2.953.602 6.477.754 7.832.18 1.356.512 4.277.75 6.508.754 7.137 1.328 11.805 1.809 14.91.242 1.656.664 4.488.902 6.324.875 6.625 1.898 13.07 3.012 18.977.242 1.324.633 3.555.906 4.969.512 3.011 1.687 9.007 2.531 12.8 2.89 13.286 4.156 17.258 7.559 23.797.933 1.805 2.137 3.914 2.68 4.668.511.754 1.265 1.836 1.656 2.41 1.718 2.559 6.629 7.559 9.34 9.489.449.328 1.324.96 1.894 1.414.606.48 1.176.843 1.328.843.121 0 .422.211.66.454 1.176 1.144 9.461 5.09 13.012 6.144.664.211 1.477.48 1.809.633.785.36 5.21 1.473 10.543 2.68 2.32.543 4.699 1.113 5.27 1.265 1.386.36 10.12 2.106 16.718 3.313 3.793.691 11.176 1.867 15.812 2.531 1.747.238 3.977.57 4.97.75 3.644.633 18.706 2.383 28.163 3.285 3.403.332 7.59.723 9.336.902 2.832.301 5.723.543 19.578 1.536 2.078.152 6.809.422 10.543.605 3.735.18 8.946.45 11.598.602 21.445 1.234 82.77 1.234 103.914 0 2.652-.18 7.863-.422 11.598-.602 6.414-.3 8.765-.453 18.824-1.207 12.89-.992 31.84-2.832 38.254-3.734 1.836-.27 5-.692 7.078-.965 7.68-.992 18.223-2.59 24.246-3.703 6.598-1.207 15.332-2.953 16.719-3.313.57-.152 2.949-.722 5.27-1.265 5.21-1.176 9.73-2.32 10.542-2.68a174.8 174.8 0 0 1 3.012-1.055c2.469-.812 10.664-4.699 11.355-5.363.211-.211.813-.66 1.325-.965 2.351-1.473 3.433-2.316 5.574-4.246 2.41-2.2 5.754-5.812 6.566-7.047.27-.422.993-1.445 1.594-2.258.633-.843 1.145-1.597 1.145-1.718 0-.122.484-.965 1.054-1.868.575-.902 1.266-2.23 1.54-2.953.3-.691.6-1.445.722-1.593.57-.754 2.68-6.75 3.582-10.153 1.418-5.27 4.066-17.71 5.031-23.586.242-1.504.512-2.918.602-3.16.273-.664 1.93-10.996 3.433-21.535.332-2.32.664-4.64.754-5.121.243-1.387 1.325-10.633 1.809-15.512.238-2.41.57-5.183.75-6.176.184-.996.512-4.246.754-7.23.242-2.98.574-6.656.723-8.133.18-1.504.453-4.937.632-7.68.18-2.742.453-6.113.602-7.53.183-1.415.512-6.626.754-11.595.273-4.972.574-11.086.754-13.554 1.355-21.899 1.355-79.368 0-101.957-.153-2.563-.422-7.59-.602-11.145-.183-3.555-.453-8.254-.605-10.394-.18-2.168-.57-7.5-.903-11.895-.332-4.398-.664-8.527-.754-9.187-.09-.665-.359-3.586-.601-6.477-.242-2.89-.512-5.602-.602-6.023-.09-.422-.422-3.196-.754-6.176-.78-7.2-1.746-15.149-1.957-16.082-.09-.422-.422-2.832-.754-5.305-1.476-11.262-4.214-26.957-6.566-37.648-.332-1.508-.871-3.946-1.203-5.422-.844-3.856-1.84-7.742-2.168-8.434-.152-.332-.422-1.144-.633-1.808-.664-2.227-4.008-9.668-4.851-10.844-.122-.18-1.082-1.594-2.11-3.16-2.137-3.223-7.617-8.946-10.902-11.356-6.504-4.789-13.735-8.043-23.07-10.332a440.932 440.932 0 0 1-4.82-1.207c-1.114-.328-3.345-.812-8.134-1.805a396.317 396.317 0 0 1-4.066-.875c-5.813-1.414-24.73-4.488-37.047-6.054-2.473-.301-4.91-.633-5.422-.75-.906-.184-5.273-.633-14.156-1.508-2.473-.242-5.875-.602-7.531-.754-1.656-.18-4.64-.45-6.625-.633-1.989-.148-5.242-.422-7.23-.57-6.747-.574-25.481-1.656-35.844-2.11-20.032-.874-57.02-1.144-79.97-.57ZM85.965 214.098c.18.148 1.055.422 1.926.632 1.629.391 3.918 1.446 5.632 2.59 1.356.903 4.551 4.336 5.18 5.543.305.602.633 1.145.723 1.235.094.09.363.691.605 1.355.211.66.48 1.356.633 1.504.39.574.844 4.156.844 6.809 0 2.59-.395 5.632-.906 6.746-1.625 3.734-2.41 4.968-4.457 7.14-1.899 1.957-2.68 2.559-5.27 3.825-2.11 1.054-3.617 1.597-4.82 1.714-.965.121-1.809.332-1.899.454-.21.363-6.746.363-6.746 0 0-.122-.754-.333-1.719-.454-.933-.117-2.105-.39-2.617-.601a30.998 30.998 0 0 0-1.988-.813c-.574-.21-1.117-.453-1.207-.543-.09-.12-.543-.39-1.055-.632-1.746-.872-5.36-4.88-6.414-7.079-.574-1.175-1.113-2.32-1.265-2.558-1.024-2.05-1.204-11.387-.243-13.555.274-.574.664-1.535.875-2.11.211-.57.453-1.113.543-1.202.09-.09.45-.696.782-1.356.574-1.117 4.156-4.972 4.668-4.972.12 0 .394-.211.605-.48.57-.634 3.492-2.048 5.27-2.5.843-.212 1.777-.513 2.109-.665.332-.148 1.144-.3 1.805-.39 1.777-.18 8.015.09 8.406.363Zm328.191 20.992v15.21h-58.433v-20.359l3.254-.515c7.199-1.113 11.687-1.867 11.957-2.047.18-.121 1.656-.36 3.312-.57 1.656-.211 3.164-.485 3.313-.606.183-.117 1.597-.39 3.164-.601 1.566-.18 3.613-.543 4.52-.782.902-.21 2.8-.543 4.214-.722 1.418-.184 2.832-.453 3.164-.575.332-.148 1.836-.421 3.313-.632 1.507-.18 3.191-.45 3.765-.633.57-.149 2.742-.57 4.82-.903 2.079-.332 4.79-.78 6.024-.992 1.234-.242 2.559-.422 2.95-.453l.663-.031Zm-249.398 13.433v18.043h30.12v26.809H164.73l.118 27.922c.093 30.09.03 28.613 1.66 32.316 1.234 2.864 4.726 5.785 7.738 6.508.512.121 1.086.36 1.328.543.57.45 12.77.45 13.313-.031.238-.18 1.324-.422 2.468-.543l2.02-.211v26.418l-.816.36c-.75.331-4.215.874-8.973 1.445-6.777.785-19.129.875-19.852.12-.18-.148-.66-.269-1.113-.269-1.176 0-6.055-.906-6.418-1.176-.18-.12-.992-.422-1.836-.601-.812-.211-1.625-.485-1.808-.602-.149-.152-.84-.422-1.504-.633-.664-.21-1.266-.484-1.356-.574-.09-.09-.633-.422-1.207-.754-2.5-1.324-3.25-1.804-4.578-2.922-.781-.632-1.504-1.171-1.656-1.171-.301-.032-2.59-2.532-4.395-4.82-1.386-1.778-3.437-5.18-4.129-6.93-.242-.57-.511-1.114-.601-1.204-.121-.09-.422-1.023-.723-2.109-.273-1.082-.633-2.227-.785-2.559-.148-.332-.512-1.687-.75-3.011a144.286 144.286 0 0 0-.816-3.766c-.211-.902-.36-11.508-.45-31.566l-.12-30.18h-17.442v-26.809h17.473v-30.363l2.046-.21c1.114-.118 2.168-.329 2.32-.45.18-.121 1.657-.39 3.313-.602 1.656-.21 3.164-.515 3.313-.632.18-.121 2.078-.454 4.218-.723 2.168-.305 4.067-.633 4.215-.754.18-.121 1.176-.332 2.258-.422a49.719 49.719 0 0 0 4.219-.691c3.223-.664 8.855-1.54 9.125-1.387.121.059.21 8.254.21 18.191Zm99.851 15.18c4.215.242 8.977.785 9.336 1.055.18.12.903.332 1.657.422 1.718.273 5.906 1.507 8.433 2.53 2.11.845 6.809 3.192 7.531 3.798.243.18.782.539 1.204.722.421.211 1.75 1.262 2.921 2.29 1.176 1.054 2.262 1.957 2.41 2.015.454.211 5.813 6.719 5.813 7.078 0 .09.274.575.606 1.024.632.906 3.312 6.117 3.312 6.449 0 .117.242.781.57 1.473.301.695.664 1.75.786 2.32.12.574.332 1.176.449 1.355.12.153.394 1.114.605 2.11.18.992.422 2.02.512 2.258.121.242.39 1.535.633 2.863.36 1.988.449 9.488.57 42.68l.121 40.3h-32.86l-.03-3.554c-.032-1.926-.122-4.727-.243-6.204l-.18-2.71-.874 1.203c-1.383 1.84-5.934 6.175-7.739 7.379-3.949 2.593-5 3.222-6.086 3.586-.664.18-1.535.543-1.957.78-.453.212-1.566.575-2.472.755-.903.21-1.805.484-1.957.601-1.535 1.145-20.512 1.117-21.989-.027-.148-.121-1.234-.39-2.41-.602-1.144-.21-2.5-.543-3.011-.785-.48-.21-1.778-.754-2.829-1.176a42.42 42.42 0 0 1-3.554-1.746 49.866 49.866 0 0 0-2.442-1.414c-1.265-.695-1.687-1.086-5.12-4.52-3.524-3.523-3.977-4.003-3.977-4.335 0-.121-.391-.785-.84-1.477-.485-.691-1.176-1.957-1.54-2.773-.359-.84-.843-1.836-1.054-2.258-.238-.422-.57-1.504-.781-2.41-.211-.903-.48-1.805-.602-1.957-.332-.422-.906-4.7-.906-6.567 0-.87-.148-1.746-.328-1.925-.363-.364-.274-1.567.66-8.829.18-1.414.453-2.71.574-2.859.121-.18.39-.965.57-1.777.391-1.567 1.208-3.614 2.051-5.153.27-.511.63-1.203.813-1.566.18-.39.422-.691.57-.691.121 0 .211-.18.211-.391 0-.332 3.313-4.64 3.887-5.031.12-.09.332-.39.422-.692.12-.332.48-.632.812-.722.332-.09.602-.274.602-.395 0-.3 5.062-4.277 6.777-5.27 1.234-.753 4.008-2.167 8.043-4.097.574-.3 6.203-2.106 8.676-2.8.902-.27 2.68-.634 3.914-.813 1.234-.211 2.41-.453 2.562-.57.18-.122 1.985-.395 4.067-.575 2.078-.18 4.637-.48 5.722-.633 4.278-.632 19.305-.511 20.903.153.543.238.57.12.36-2.442-.118-1.476-.329-2.742-.45-2.832-.152-.09-.332-.66-.453-1.265-.211-1.114-1.356-3.551-2.438-5.211-.695-1.051-3.617-4.067-3.949-4.067-.117 0-.629-.3-1.144-.691-1.325-.965-3.461-1.926-4.758-2.168-.633-.121-1.145-.332-1.145-.453 0-1.324-19.457-1.535-25.3-.239-.754.149-2.5.48-3.915.723-1.418.238-2.832.57-3.164.723-.332.148-1.414.422-2.41.601-.992.18-2.078.453-2.41.602-.332.152-1.535.484-2.68.754-1.144.27-2.23.57-2.41.722-.18.122-.992.422-1.836.633-.812.211-1.656.512-1.808.633-.18.121-.993.39-1.809.602-.84.18-2.016.601-2.617.902-.633.332-1.207.574-1.297.574-.09 0-.152-6.297-.152-13.976 0-10.875.093-14.036.394-14.278.211-.18 1.055-.48 1.867-.691.844-.18 1.657-.453 1.805-.574.184-.121 1.176-.48 2.262-.754 1.082-.301 2.105-.63 2.258-.75.18-.153 1.113-.395 2.078-.602.996-.21 2.02-.484 2.258-.633.273-.12 1.507-.453 2.742-.722a58.95 58.95 0 0 0 2.863-.633c.328-.094 2.016-.363 3.762-.606 1.75-.238 3.586-.57 4.066-.722 1.75-.54 17.531-1.535 21.086-1.324.992.058 3.164.18 4.82.27ZM98.492 326.508v59.937H63.254V266.566h35.238Zm266.266-22.594c0 35.664.152 42.563.875 43.527.148.149.332.75.453 1.325.422 2.257 2.379 5.543 4.605 7.77 1.176 1.206 2.5 2.26 2.922 2.378.453.094.785.274.785.395 0 .117 1.055.539 2.348.96 1.93.606 2.953.723 5.965.723 2.11 0 3.945-.148 4.367-.328.39-.21 1.324-.512 2.078-.723.754-.21 2.11-.843 3.012-1.449 1.687-1.082 4.82-3.972 4.82-4.457 0-.148.422-.812.903-1.445.511-.664.906-1.324.906-1.504 0-.184.27-.816.57-1.418.332-.602.692-1.625.813-2.258.09-.664.3-1.324.453-1.476.754-.965.875-7.047.875-42.38v-36.988h35.238v119.88H420.06c-13.04 0-16.778-.09-16.957-.391-.122-.18-.27-3.043-.332-6.325-.06-3.253-.211-5.933-.329-5.933-.12 0-.484.36-.843.812-1.688 2.29-4.34 4.88-8.496 8.313-.602.48-1.836 1.144-4.547 2.469-1.235.601-2.59 1.296-3.012 1.507-.422.211-1.566.543-2.563.754-.992.211-1.867.48-1.957.602-.3.45-5.632.902-10.902.902-5.18 0-9.398-.36-10.633-.875-.332-.148-1.476-.511-2.562-.781-1.082-.27-2.078-.633-2.258-.754-.148-.121-.871-.422-1.566-.633-.723-.18-1.293-.449-1.293-.57 0-.121-.543-.39-1.207-.602-.66-.21-1.204-.484-1.204-.605 0-.117-.332-.36-.722-.54-2.59-1.175-8.465-6.687-10.934-10.241-1.508-2.168-3.828-6.508-4.308-8.102-.18-.633-.543-1.566-.754-2.05-.211-.512-.57-1.594-.754-2.41-.18-.84-.45-1.716-.602-2.016-.148-.274-.422-1.688-.601-3.164-.18-1.446-.512-2.922-.692-3.254-.273-.45-.394-11.204-.453-43.313l-.09-42.68h35.27Zm0 0" fill="#FF6200" /><path d="M260.691 333.164c-1.472.149-2.98.39-3.312.54-.332.183-1.414.452-2.41.663-.961.18-2.258.543-2.86.813-4.52 1.957-6.718 3.254-8.222 4.82-1.446 1.508-2.895 4.309-3.133 6.055-.063.601-.274 1.386-.453 1.715-.332.695-.211 2.832.332 5.632.601 3.043 3.012 6.75 5.148 7.864 3.797 1.957 4.52 2.257 6.63 2.59 3.792.57 11.023.242 12.589-.602.27-.152 1.387-.664 2.469-1.145 1.086-.511 2.5-1.328 3.164-1.84.664-.511 1.414-1.113 1.687-1.324 1.715-1.293 4.88-6.535 5.301-8.703.09-.543.332-1.176.512-1.418.21-.27.36-3.043.422-8.012l.12-7.59-1.628-.179c-2.2-.273-13.04-.18-16.356.121Zm0 0" fill="#FF6200" />
            </svg>
          )}
          {selectedBank === 'Millennium' && (
            <svg className="h-11 w-11 flex-shrink-0" viewBox="-1.00811589 -1.00811589 146.53999178 35.62009478" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M 144.52376,33.542611 L 144.52376,0.052611341 L 0,0.052611341 L 0,33.542611 L 144.52376,33.542611 z" fill="#cd0067" />
              <path d="M 97.40876,30.316361 C 97.7,30.480111 98.0025,30.561361 98.36375,30.561361 C 99.64626,30.561361 100.45,29.733861 100.45,28.428861 C 100.45,27.240111 99.76251,26.447611 98.78375,26.447611 C 98.49251,26.447611 98.15376,26.528861 97.7575,26.680111 L 98.35251,25.618861 C 98.57376,25.585111 98.78375,25.561361 98.98125,25.561361 C 100.56751,25.561361 101.60375,26.656361 101.60375,28.323861 C 101.60375,30.176361 100.31,31.412611 98.16625,31.412611 C 97.6875,31.412611 97.07126,31.343861 96.32,31.207611 L 96.32,23.076361 L 97.40876,23.076361 L 97.40876,30.316361" fill="#ffffff" />
              <path d="M 106.97625,26.831361 L 106.97625,25.607611 C 106.30125,25.513861 105.8225,25.467611 105.54376,25.467611 C 103.73625,25.467611 102.36126,26.796361 102.36126,28.497611 C 102.36126,30.152611 103.725,31.400111 105.67126,31.400111 C 106.2075,31.400111 106.66251,31.272611 107.09375,31.003861 L 107.46751,30.066361 C 106.9075,30.326361 106.3925,30.478861 105.87,30.478861 C 104.61,30.478861 103.64376,29.558861 103.64376,28.265111 C 103.64376,27.098861 104.36625,26.306361 105.48501,26.306361 C 105.91625,26.306361 106.41751,26.481361 106.97625,26.831361" fill="#ffffff" />
              <path d="M 109.7475,33.603861 L 108.65626,33.603861 L 108.65626,25.615111 L 109.72125,25.615111 L 109.72376,26.422611 C 110.29375,25.805111 110.97,25.490111 111.75125,25.490111 C 113.27876,25.490111 114.47875,26.702611 114.47875,28.300111 C 114.47875,29.348861 114.0475,30.235111 113.30125,30.793861 C 112.78875,31.178861 112.23001,31.353861 111.60001,31.353861 C 111.32,31.353861 111.02876,31.318861 110.72625,31.248861 L 110.03875,30.246361 C 110.50376,30.456361 110.90125,30.561361 111.2625,30.561361 C 112.4975,30.561361 113.25501,29.803861 113.25501,28.486361 C 113.25501,27.203861 112.45126,26.341361 111.40126,26.341361 C 110.9475,26.341361 110.52751,26.505111 110.20125,26.807611 C 109.77,27.203861 109.74625,27.763861 109.74625,28.545111 L 109.74625,28.893861 L 109.7475,33.603861" fill="#ffffff" />
              <path d="M 40.78751,5.7863613 C 40.78751,4.9813613 40.17501,4.2726113 39.37376,4.2726113 C 38.59626,4.2726113 37.84251,4.8588613 37.84251,5.7138613 C 37.84251,6.6163613 38.5025,7.3251113 39.37376,7.3251113 C 40.17501,7.3251113 40.78751,6.5926113 40.78751,5.7863613" fill="#ffffff" />
              <path d="M 38.375,8.7888613 C 38.375,8.7888613 38.38375,10.351361 38.38375,11.475111 L 38.38375,17.308861 C 38.38375,18.432611 38.36751,20.018861 38.36751,20.018861 L 40.525,20.018861 C 40.525,20.018861 40.52751,18.432611 40.52751,17.308861 L 40.52751,8.7901113 C 40.52751,8.7901113 39.46751,8.7888613 38.92625,8.7888613 L 38.375,8.7888613" fill="#ffffff" />
              <path d="M 43.9975,3.9438613 C 43.9975,3.9438613 44.0125,5.5326113 44.0125,6.6563613 L 44.0125,17.311361 C 44.0125,18.435111 44.01875,20.023861 44.01875,20.023861 L 46.2675,20.023861 C 46.2675,20.023861 46.23625,18.435111 46.23625,17.311361 L 46.23625,3.9388613 C 46.23625,3.9388613 45.16126,3.9438613 44.59875,3.9438613 L 43.9975,3.9438613" fill="#ffffff" />
              <path d="M 49.54251,3.9213613 C 49.54251,3.9213613 49.55876,5.5101113 49.55876,6.6338613 L 49.55876,17.288861 C 49.55876,18.412611 49.56375,20.001361 49.56375,20.001361 L 51.81251,20.001361 C 51.81251,20.001361 51.78251,18.412611 51.78251,17.288861 L 51.78251,3.9163613 C 51.78251,3.9163613 50.70626,3.9213613 50.145,3.9213613 L 49.54251,3.9213613" fill="#ffffff" />
              <path d="M 25.38,15.858861 L 20.815,5.1501113 C 19.39375,1.8601113 17.39376,0.51386134 15.80626,0.13386134 C 15.09876,-0.11113866 13.04376,0.055111341 13.04376,0.055111341 C 13.04376,0.055111341 14.59126,0.13386134 15.44125,0.77761134 C 16.63125,1.5551113 17.37001,3.3726113 17.04001,5.8326113 L 15.59375,16.538861 C 15.4,17.850111 15.01375,20.010111 15.01375,20.010111 L 17.09126,20.010111 C 17.09126,20.010111 17.22125,18.358861 17.41501,16.877611 L 18.79876,6.4376113 L 23.4125,17.387611 C 23.995,18.747611 24.335,19.403861 25.55001,20.326361 L 30.98875,6.4126113 L 32.3725,18.116361 C 32.45251,18.943861 32.5125,20.010111 32.5125,20.010111 L 35.20626,20.010111 C 35.20626,20.010111 34.97125,18.602611 34.825,17.461361 L 33.22251,5.5388613 C 33.17376,4.9801113 33.10875,4.0338613 33.10875,4.0338613 L 29.775,4.0338613 L 29.775,4.0576113 C 29.775,4.5676113 29.60501,5.0526113 29.41001,5.5626113 L 25.38,15.858861" fill="#ffffff" />
              <path d="M 65.89125,13.906361 C 65.99001,10.753861 63.71626,8.3588613 60.39375,8.3588613 C 56.7525,8.3588613 54.28376,10.827611 54.28376,14.223861 C 54.28376,17.621361 57.14375,20.235111 61.2975,20.235111 C 62.44626,20.235111 63.61876,20.065111 64.67,19.625111 L 65.89125,17.327611 L 65.81876,17.327611 C 64.69375,18.207611 63.27751,18.622611 61.81126,18.622611 C 59.05001,18.622611 56.97251,16.887611 56.92376,13.906361 L 65.89125,13.906361 z M 57.02126,12.488861 C 57.31375,10.950111 58.53626,9.9726113 60.17376,9.9726113 C 61.9325,9.9726113 63.05751,10.778861 63.32625,12.488861 L 57.02126,12.488861" fill="#ffffff" />
              <path d="M 96.32,5.8001113 C 96.32,4.9938613 95.70751,4.2863613 94.90626,4.2863613 C 94.12875,4.2863613 93.375,4.8713613 93.375,5.7263613 C 93.375,6.6301113 94.035,7.3376113 94.90626,7.3376113 C 95.70751,7.3376113 96.32,6.6051113 96.32,5.8001113" fill="#ffffff" />
              <path d="M 93.90876,8.8026113 C 93.90876,8.8026113 93.91751,10.365111 93.91751,11.487611 L 93.91751,17.322611 C 93.91751,18.445111 93.90126,20.031361 93.90126,20.031361 L 96.0575,20.031361 C 96.0575,20.031361 96.06126,18.445111 96.06126,17.322611 L 96.06126,8.8038613 C 96.06126,8.8038613 95.00125,8.8026113 94.45876,8.8026113 L 93.90876,8.8026113" fill="#ffffff" />
              <path d="M 67.94375,8.7826113 C 67.94375,8.7826113 67.96501,10.370111 67.96501,11.495111 L 67.96501,17.311361 C 67.96501,18.435111 67.96751,20.023861 67.96751,20.023861 L 70.2075,20.023861 C 70.2075,20.023861 70.19,18.460111 70.19,17.335111 L 70.19,13.010111 C 70.19,11.567611 70.55626,10.077611 72.78001,10.077611 C 75.00375,10.077611 75.73626,11.421361 75.73626,14.036361 L 75.73626,17.335111 C 75.73626,18.435111 75.73501,20.023861 75.73501,20.023861 L 77.97751,20.023861 C 77.97751,20.023861 77.96126,18.460111 77.96126,17.335111 L 77.96126,13.792611 C 77.96126,12.643861 78.03376,11.128861 77.35001,10.150111 C 76.5675,9.0026113 75.00375,8.4638613 73.635,8.4638613 C 72.04626,8.4638613 71.04501,9.1738613 70.19,10.346361 L 70.19,8.7713613 C 70.19,8.7713613 69.01625,8.7826113 68.47875,8.7826113 L 67.94375,8.7826113" fill="#ffffff" />
              <path d="M 106.78251,8.7488613 C 106.78251,8.7488613 106.78501,10.337611 106.78501,11.485111 L 106.78501,15.248861 C 106.78501,17.131361 105.61251,18.450111 104,18.450111 C 101.87376,18.450111 101.23875,17.057611 101.23875,14.808861 L 101.23875,8.7501113 C 101.23875,8.7501113 100.2125,8.7488613 99.67376,8.7488613 L 98.99251,8.7488613 C 98.99251,8.7488613 99.01375,10.337611 99.01375,11.461361 L 99.01375,15.225111 C 99.01375,18.670111 100.3825,20.307611 103.26625,20.307611 C 104.97751,20.307611 105.90625,19.745111 106.78501,18.401361 L 106.78501,19.990111 L 109.01125,19.990111 C 109.01125,19.990111 109.01,18.450111 109.01,17.326361 L 109.01,8.7526113 C 109.01,8.7526113 107.73875,8.7488613 107.10375,8.7488613 L 106.78251,8.7488613" fill="#ffffff" />
              <path d="M 80.63,8.7701113 C 80.63,8.7701113 80.65126,10.358861 80.65126,11.483861 L 80.65126,17.298861 C 80.65126,18.423861 80.65376,20.011361 80.65376,20.011361 L 82.89375,20.011361 C 82.89375,20.011361 82.875,18.447611 82.875,17.323861 L 82.875,12.998861 C 82.875,11.556361 83.24251,10.066361 85.46626,10.066361 C 87.69,10.066361 88.4225,11.410111 88.4225,14.025111 L 88.4225,17.323861 C 88.4225,18.423861 88.42125,20.011361 88.42125,20.011361 L 90.66375,20.011361 C 90.66375,20.011361 90.64625,18.447611 90.64625,17.323861 L 90.64625,13.780111 C 90.64625,12.631361 90.72,11.116361 90.03626,10.138861 C 89.25376,8.9901113 87.69,8.4526113 86.32126,8.4526113 C 84.7325,8.4526113 83.73125,9.1613613 82.875,10.335111 L 82.875,8.7601113 C 82.875,8.7601113 81.70251,8.7701113 81.16501,8.7701113 L 80.63,8.7701113" fill="#ffffff" />
              <path d="M 112.14375,8.7776113 C 112.14375,8.7776113 112.16751,10.342611 112.16751,11.466361 L 112.16751,17.306361 C 112.16751,18.431361 112.1575,20.018861 112.1575,20.018861 L 114.39125,20.018861 C 114.39125,20.018861 114.39125,18.431361 114.39125,17.306361 L 114.39125,13.567611 C 114.39125,11.221361 115.29625,10.072611 117.15376,10.072611 C 118.66876,10.072611 119.93875,11.368861 119.93875,13.933861 L 119.93875,17.306361 C 119.93875,18.431361 119.94126,20.018861 119.94126,20.018861 L 122.1625,20.018861 C 122.1625,20.018861 122.1625,18.431361 122.1625,17.306361 L 122.1625,13.763861 C 122.1625,11.466361 122.77375,10.072611 124.97376,10.072611 C 126.92875,10.072611 127.71,11.661361 127.71,14.153861 L 127.71,17.306361 C 127.71,18.431361 127.6875,20.018861 127.6875,20.018861 L 129.94126,20.018861 C 129.94126,20.018861 129.935,18.357611 129.935,17.306361 L 129.935,13.543861 C 129.935,10.440111 129.03001,8.4601113 125.56,8.4601113 C 123.75125,8.4601113 122.60251,9.2663613 121.65,10.586361 C 120.74626,9.1451113 119.5725,8.4601113 117.83751,8.4601113 C 116.2,8.4601113 115.2475,9.0713613 114.39125,10.391361 L 114.39125,8.7826113 C 114.39125,8.7826113 113.34126,8.7776113 112.80375,8.7776113 L 112.14375,8.7776113" fill="#ffffff" />
            </svg>
          )}
          {selectedBank === 'Novobanco' && (
            <svg className="h-11 w-11 flex-shrink-0" viewBox="0 0 212.26 31" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path className="cls-1" fill="#009f98" d="M20.52,17.53V30.36a12.67,12.67,0,0,1-3.42.42,12.93,12.93,0,0,1-3.42-.42V17.1c0-1.92-.85-3.2-3.85-3.2a11.35,11.35,0,0,0-3,.42v16a12.67,12.67,0,0,1-3.42.42A12.93,12.93,0,0,1,0,30.36V10.69A22.61,22.61,0,0,1,10.26,8.34C15.82,8.34,20.52,10.26,20.52,17.53Z"/><path className="cls-1" fill="#009f98" d="M23.47,19.67c0-7.1,4.7-11.33,11.54-11.33s11.55,4.23,11.55,11.33S41.85,31,35,31,23.47,26.76,23.47,19.67Zm16,0C39.5,16.08,38,13.9,35,13.9s-4.49,2.18-4.49,5.77S32,25.44,35,25.44,39.5,23.26,39.5,19.67Z"/><path className="cls-1" fill="#009f98" d="M66.86,8.55A13.87,13.87,0,0,1,70.5,9a75.36,75.36,0,0,1-7.7,21.38,17.81,17.81,0,0,1-7.69,0A75.36,75.36,0,0,1,47.41,9a15.58,15.58,0,0,1,7.27,0c1.2,4.92,2.61,10.05,4.44,15.39h.09A90.85,90.85,0,0,0,63.23,9,13.85,13.85,0,0,1,66.86,8.55Z"/><path className="cls-1" fill="#009f98" d="M71.35,19.67c0-7.1,4.7-11.33,11.54-11.33s11.55,4.23,11.55,11.33S89.73,31,82.89,31,71.35,26.76,71.35,19.67Zm16,0c0-3.59-1.49-5.77-4.49-5.77s-4.49,2.18-4.49,5.77,1.46,5.77,4.49,5.77S87.38,23.26,87.38,19.67Z"/><path className="cls-1" fill="#009f98" d="M119.19,19.24c0,8.55-5.77,11.76-12.4,11.76a19.11,19.11,0,0,1-9.41-2.35V.43A13.42,13.42,0,0,1,100.8,0a13.22,13.22,0,0,1,3.43.43V8.72a19.61,19.61,0,0,1,3.84-.38C114.27,8.34,119.19,11.54,119.19,19.24Zm-7.06.43c0-3.42-1.28-5.77-4.91-5.77a11.29,11.29,0,0,0-3,.42V25a9.52,9.52,0,0,0,3,.43C110.85,25.44,112.13,23.09,112.13,19.67Z"/><path className="cls-1" fill="#009f98" d="M141.8,17.1v12A31.72,31.72,0,0,1,131.11,31c-5.13,0-9.83-1.29-9.83-6.84,0-6.42,6.84-7.06,13.68-7.06,0-2.14-.85-3.2-3.85-3.2a16.79,16.79,0,0,0-6.62,1.71,8.86,8.86,0,0,1-2.35-4.92,20,20,0,0,1,9.62-2.35C137.31,8.34,141.8,10.48,141.8,17.1ZM135,25v-3.2c-4.7,0-6.62,0-6.62,1.83,0,1.37,1.06,1.8,3.2,1.8A14.44,14.44,0,0,0,135,25Z"/><path className="cls-1" fill="#009f98" d="M165.7,17.53V30.36a12.67,12.67,0,0,1-3.42.42,12.93,12.93,0,0,1-3.42-.42V17.1c0-1.92-.85-3.2-3.85-3.2a11.29,11.29,0,0,0-3,.42v16a12.67,12.67,0,0,1-3.42.42,12.88,12.88,0,0,1-3.42-.42V10.69a22.61,22.61,0,0,1,10.26-2.35C161,8.34,165.7,10.26,165.7,17.53Z"/><path className="cls-1" fill="#009f98" d="M186,23.73a9.61,9.61,0,0,1,2.36,5.13A15,15,0,0,1,179.76,31c-5.13,0-11.11-2.78-11.11-11.33,0-8.13,6-11.33,11.11-11.33a15,15,0,0,1,8.56,2.14A9.61,9.61,0,0,1,186,15.61a8.2,8.2,0,0,0-5.13-1.71c-2.78,0-5.13,1.49-5.13,5.77s2.35,5.77,5.13,5.77A8.2,8.2,0,0,0,186,23.73Z"/><path className="cls-1" fill="#009f98" d="M189.17,19.67c0-7.1,4.7-11.33,11.54-11.33s11.55,4.23,11.55,11.33S207.55,31,200.71,31,189.17,26.76,189.17,19.67Zm16,0c0-3.59-1.49-5.77-4.49-5.77s-4.49,2.18-4.49,5.77,1.46,5.77,4.49,5.77S205.2,23.26,205.2,19.67Z"/>
            </svg>
          )}
        </div>
      </CardHeader>
      <CardContent>
        <form onSubmit={handleSubmit} className="space-y-4">
          {/* Seletor de Banco */}
          <div className="space-y-2">
            <Label>Banco</Label>
            <Select value={selectedBank} onValueChange={(value: Bank) => setSelectedBank(value)}>
              <SelectTrigger className="w-full">
                <SelectValue />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="Wise">Wise</SelectItem>
                <SelectItem value="C6 Bank">C6 Bank</SelectItem>
                <SelectItem value="Itaú">Itaú</SelectItem>
                <SelectItem value="Millennium">Millennium</SelectItem>
                <SelectItem value="Novobanco">Novobanco</SelectItem>
              </SelectContent>
            </Select>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {/* De */}
            <div className="space-y-2">
              <Label>De</Label>
              <div className="flex gap-2">
                <Input
                  type="number"
                  step="0.01"
                  placeholder="0.00"
                  value={fromAmount}
                  onChange={(e) => setFromAmount(e.target.value)}
                  className="w-[140px]"
                />
                <Select value={fromCurrency} onValueChange={(value: Currency) => setFromCurrency(value)}>
                  <SelectTrigger className="w-[140px]">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent>
                    {(['BRL', 'EUR', 'USD'] as Currency[]).map((currency) => (
                      <SelectItem key={currency} value={currency}>
                        <div className="flex items-center gap-2">
                          <Image src={currencyFlags[currency]} alt={currency} width={20} height={15} className="rounded" />
                        </div>
                      </SelectItem>
                    ))}
                  </SelectContent>
                </Select>
              </div>
            </div>

            {/* Para */}
            <div className="space-y-2">
              <Label>Para</Label>
              <div className="flex gap-2">
                <Input
                  type="number"
                  step="0.01"
                  placeholder="0.00"
                  value={toAmount}
                  readOnly
                  className="w-[140px] bg-muted"
                />
                <Select value={toCurrency} onValueChange={(value: Currency) => setToCurrency(value)}>
                  <SelectTrigger className="w-[140px]">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent>
                    {(['BRL', 'EUR', 'USD'] as Currency[]).map((currency) => (
                      <SelectItem key={currency} value={currency}>
                        <div className="flex items-center gap-2">
                          <Image src={currencyFlags[currency]} alt={currency} width={20} height={15} className="rounded" />
                        </div>
                      </SelectItem>
                    ))}
                  </SelectContent>
                </Select>
              </div>
            </div>
          </div>

          {/* Alerta de moedas iguais */}
          {fromCurrency === toCurrency && (
            <div className="bg-destructive/10 text-destructive p-3 rounded-md text-sm">
              ⚠️ Não é possível converter para a mesma moeda. Selecione moedas diferentes.
            </div>
          )}

          {/* Informações da conversão */}
          {fromAmount && toAmount && parseFloat(fromAmount) > 0 && (
            <div className="space-y-2">
              <div className="text-sm bg-muted p-3 rounded-md space-y-1">
                <div className="flex justify-between">
                  <span className="text-muted-foreground">Valor original:</span>
                  <span className="font-medium">{getCurrencySymbol(fromCurrency)} {parseFloat(fromAmount).toFixed(2)}</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-muted-foreground">Taxa Wise (4,22%):</span>
                  <span className="font-medium text-destructive">- {getCurrencySymbol(fromCurrency)} {(parseFloat(fromAmount) * WISE_FEE_PERCENTAGE).toFixed(2)}</span>
                </div>
                <div className="flex justify-between">
                  <span className="text-muted-foreground">Valor após taxa:</span>
                  <span className="font-medium">{getCurrencySymbol(fromCurrency)} {(parseFloat(fromAmount) * (1 - WISE_FEE_PERCENTAGE)).toFixed(2)}</span>
                </div>
                <div className="border-t pt-1 mt-1 flex justify-between">
                  <span className="text-muted-foreground">Você recebe:</span>
                  <span className="font-semibold text-primary">{getCurrencySymbol(toCurrency)} {parseFloat(toAmount).toFixed(2)}</span>
                </div>
              </div>
            </div>
          )}

          {/* Botão Inverter moedas */}
          <Button
            type="button"
            variant="outline"
            onClick={handleSwapCurrencies}
            className="w-full gap-2"
          >
            <ArrowRightLeft className="h-4 w-4" />
            Inverter moedas
          </Button>

          <Button type="submit" disabled={isSubmitting} className="w-full">
            {isSubmitting ? (
              <>
                <Loader2 className="mr-2 h-4 w-4 animate-spin" />
                Salvando...
              </>
            ) : (
              <>
                <Plus className="mr-2 h-4 w-4" />
                Registrar Conversão
              </>
            )}
          </Button>
        </form>
      </CardContent>
    </Card>
  );
}
